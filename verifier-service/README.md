# Verifier Service

Rust/Actix-web service for verifying zero-knowledge proofs of SBOM validation.

## Structure

- `src/main.rs` - Application entry point and server setup
- `src/config.rs` - Configuration management
- `src/models.rs` - Request/response models and data structures
- `src/handlers.rs` - HTTP request handlers
- `src/utils.rs` - Utility functions (receipt loading, etc.)
- `methods/` - Risc0 ZKVM guest program (shared with proving service)

## API Endpoints

### `GET /health`
Health check endpoint.

**Response:**
```json
{
  "status": "healthy"
}
```

### `POST /verify`
Verify a ZKP proof.

**Request:**
```json
{
  "proof": "<base64-encoded-proof>"
}
```

**Response (success):**
```json
{
  "valid": true,
  "sbom_hash": "<64-char-hex-hash>",
  "is_valid": true,
  "banned_list_info": {
    "source": "CVE Database",
    "entry_count": 42,
    "hash": "<hash>"
  }
}
```

**Response (verification failed):**
```json
{
  "error": "Receipt verification failed: ..."
}
```

## Environment Variables

- `PORT` - Server port (default: 8080)

## How It Works

1. Receives base64-encoded proof (receipt)
2. Decodes the proof from base64 and deserializes it into a Risc0 receipt
3. Verifies the receipt cryptographically against the expected image ID
4. Decodes the journal (public outputs) from the receipt
5. Returns verification result along with SBOM hash and validation status

The verification confirms that:
- The proof is cryptographically valid
- The proof was generated by the correct ZKVM program
- The SBOM hash and validation result are authentic

